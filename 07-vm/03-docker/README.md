# Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Задача 1

Сценарий выполения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберете любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

**Шаги 1**
```
root@srv1:/home/adm2/netology# cat index.html
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>

root@srv1:/home/adm2/netology# cat Dockerfile
FROM nginx
COPY ./index.html /usr/share/nginx/html/index.html
CMD ["nginx", "-g", "daemon off;"]
```
Создаем образ командой:
```
docker build -t my-nginx:1.0 .
```
Запускае контейнер командой:
```
docker run -d -p 80:80 my-nginx:1.0
```

**Ответ 1**  
https://hub.docker.com/r/bagerz2000/my-nginx  


## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- Высоконагруженное монолитное java веб-приложение;
- Nodejs веб-приложение;
- Мобильное приложение c версиями для Android и iOS;
- Шина данных на базе Apache Kafka;
- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
- Мониторинг-стек на базе Prometheus и Grafana;
- MongoDB, как основное хранилище данных для java-приложения;
- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.

**Ответ 2**

- Высоконагруженное монолитное java веб-приложение;  
Для тяжеловесных приложений логично использовать виртуальную или физическую машину

- Nodejs веб-приложение;  
Докер будет идеальным вариантом и позволит быстро разворачивать приложение и все необходимые библиотеки.

- Мобильное приложение c версиями для Android и iOS;  
Упоминание о использовании докера как основы для разработки мобильных приложений я не нашел, по итогу он используется больше как исключение из правил, а основа ложится как на физические, так и на виртуальные машины.

- Шина данных на базе Apache Kafka;  
Использование контейнеров в проектах с шиной данных на базе Apache Kafka, так же выгодно, это позволяет быстро разворачивать приложения на основных и тестовых серверах, и при необходимости быстро восстановить или откатить изменения.

- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;  
Для данной инфроструктуры тоже подойдет докер он проще удобнее и менее ресурсозатратен чем альтернатива с виртуальной машиной.

- Мониторинг-стек на базе Prometheus и Grafana;  
Нашел информацию о том, что node_exporter и некоторые другие решения по предоставлению метрик из-за взаимодействий с ядром системы более проблемно работают в контейнерах, но Prometheus и Grafana вполне возможно использовать в докере.

- MongoDB, как основное хранилище данных для java-приложения;  
Сама MongoDB рекомендует использовать докер да и сам контейнер присутствует в их репозитории.

- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.  
Серевер Gitlab будет проще развернуть на виртуальной машине так как нет никаких предпосылок использования докера все что нужно для данного сервера это стабильный бекап и соединение.
Если в компании повсеместно используются контейнеры - тогда, может, будет удобней Docker, т.к. инженерам это будет привычней.

## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тэгом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```;
- Добавьте еще один файл в папку ```/data``` на хостовой машине;
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.

**Шаги 3**  
docker run -d -v ./data:/data centos tail -f  
docker run -d -v ./data:/data debian tail -f  
docker exec -it bbb2838f0248 bash  
echo netology > /data/netelogy.txt  
exit  
echo netology-host > ./data/netelogy-host.txt  
docker exec -it 72dbe9bd71a5 bash  
  
**Ответ 3**  
[root@72dbe9bd71a5 /]# ls /data  
netelogy-host.txt  netelogy.txt  
